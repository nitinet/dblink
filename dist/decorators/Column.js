import { Expose } from 'class-transformer';
import { COLUMN_KEY, TABLE_COLUMN_KEYS } from './Constants.js';
function Column(name) {
    return function (target, property) {
        const val = name ?? property;
        let columnVals = Reflect.getMetadata(TABLE_COLUMN_KEYS, target);
        if (!columnVals) {
            columnVals = [];
        }
        if (columnVals.includes(property)) {
            throw new Error(`Duplicate column name: ${property}`);
        }
        columnVals.push(property);
        Reflect.defineMetadata(TABLE_COLUMN_KEYS, columnVals, target);
        Reflect.defineMetadata(COLUMN_KEY, val, target, property);
        return Expose()(target, property);
    };
}
export default Column;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29sdW1uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2RlY29yYXRvcnMvQ29sdW1uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUMzQyxPQUFPLEVBQUUsVUFBVSxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFRL0QsU0FBUyxNQUFNLENBQUMsSUFBYTtJQUMzQixPQUFPLFVBQVUsTUFBYyxFQUFFLFFBQWdCO1FBQy9DLE1BQU0sR0FBRyxHQUFHLElBQUksSUFBSSxRQUFRLENBQUM7UUFFN0IsSUFBSSxVQUFVLEdBQW9CLE9BQU8sQ0FBQyxXQUFXLENBQUMsaUJBQWlCLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDakYsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ2hCLFVBQVUsR0FBRyxFQUFFLENBQUM7UUFDbEIsQ0FBQztRQUNELElBQUksVUFBVSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDO1lBQ2xDLE1BQU0sSUFBSSxLQUFLLENBQUMsMEJBQTBCLFFBQVEsRUFBRSxDQUFDLENBQUM7UUFDeEQsQ0FBQztRQUdELFVBQVUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDMUIsT0FBTyxDQUFDLGNBQWMsQ0FBQyxpQkFBaUIsRUFBRSxVQUFVLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFFOUQsT0FBTyxDQUFDLGNBQWMsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQztRQUUxRCxPQUFPLE1BQU0sRUFBRSxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNwQyxDQUFDLENBQUM7QUFDSixDQUFDO0FBRUQsZUFBZSxNQUFNLENBQUMifQ==